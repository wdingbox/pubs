<html>

<head>
    <title>9fruits</title>
    <base target="_blank" />
    <META http-equiv="Content-Type" content="text/html;" charset="UTF-8">
    <META name="viewport" content="width=device-witdh, initial-scale=1, maximum-scale=1, user-scale=0">
    <script src="./js/jq.js"></script>
    <script src="./js/jq_tablesorter.js"></script>
    <script src="./Gal522_9fruits.js"></script>
    <style type="text/css">
        body {
            align: center;
            width: 700px;
        }

        .hili {
            background-color: grey;
        }

        .hiliTD {
            background-color: lightgreen;
        }

        .hiliTR {
            border: 9px solid red;
        }

        th {
            background-color: gray;
        }

        td[contenteditable] {
            background-color: lightyellow;
        }

        .mtrx,
        dmtrx {
            margin-left: auto;
            margin-right: auto;

            text-align: center;
        }
    </style>
    <script>
        //auto gen only
        //const FRUITS = ["love", "joy", "peace", "patience", "kindness", "goodness", "faithful", "gentleness", "self-controll"]
        $(function () {
            $(".rangeinput").val(0)

            $("input[type='checkbox'").on("click", function () {
                var tot = $(this).parentsUntil("tr").find("input").length
                var nChecked = $(this).parentsUntil("tr").find("input[type='checkbox']:checked").length
                //$(this).parentsUntil("tbody").find(".rangeinput").val(100 * nChecked / tot)
            })

            gen_trs()
            gen_matrix()
            gen_agape16()
        })

        function gen_trs() {

            function checkary(ary) {
                var os = "<ol>"
                ary.forEach(function (val) {
                    os += `<li><input type='checkbox'>${val}</input></li>`
                })
                os += "</ol>"
                return os
            }

            var trs = ""
            Object.keys(NineFruits).forEach(function (key, i) {
                var obj = NineFruits[key]
                trs += `<tr><td>${1 + i}</td><td>${key}<br>${obj.chn}<br><a href='${obj.href}'>${obj.gre}</a><br>${obj.lit}</td>`
                trs += `<td>${checkary(obj.positive)}</td><td>${checkary(obj.negative)}</td></tr>`
            });

            $("#tbd").html(trs)
        }

        function gen_matrix() {
            Object.keys(NineFruits).forEach(function (key, i) {
                var obj = NineFruits[key]
                var hts = `<div class='dmtrx'>${key}<br>${obj.chn}<br><a href='${obj.href}'>${obj.gre}</a><br>${obj.lit}</div>`
                $(`.mtrx:eq(${i})`).html(hts)
            });
        }
        function gen_agape16() {
            var trs = ""
            Object.keys(Agape16v).forEach(function (key, i) {
                var ar = Agape16v[key]
                trs += `<tr><td>${1 + i}</td><td><input type='checkbox'></input></td><td>${key}</td>`;
                ar.forEach(function (val) {
                    trs += `<td>${val}</td>`
                })

                trs += `<td>`
                Agape16_cases.case1.forEach(function (val) {
                    trs += `<input type='checkbox'>${val}</input>`
                })
                trs += `</td>`
                trs += `</tr>`
            });
            $("#agape16").html(trs)
        }
    </script>
    <script>
        ////////////////
        $(function () {


            $("td").on("click", function () {
                $(this).toggleClass("hiliTD")
            })
            $("tr").on("click", function () {
                $(".hiliTR").removeClass("hiliTR")
                $(this).addClass("hiliTR")
                //
                function get_pcnt(_this, clsname) {
                    var pos_total = $(_this).find(clsname).find("input").length
                    var pos_checked = $(clsname).find("input[type='checkbox']:checked").length
                    return 100 * pos_checked / pos_total
                }
                var pos_val = get_pcnt(this, ".positive")
                var neg_val = get_pcnt(this, ".negative")

                $(this).find(".rangeinput").val(pos_val - neg_val)
            })

            //$("table").tablesorter()
        })
    </script>
</head>

<body>

    <p>Gal 5:22</p>
    <ol>
        <li>
            <p>(CUV) 圣灵所结的果子、就是 仁爱、喜乐、和平、忍耐、恩慈、良善、信实、温柔、节制. 这样的事、没有律法禁止。</p>

        </li>
        <li>
            <p>(NIV) But the fruit of the Spirit is love, joy, peace, patience, kindness, goodness, faithfulness,
                gentleness and self-control. Against such things there is no law.</p>

        </li>
    </ol>

    <table border="1">
        <caption id=""> Matrix of Nine Fruits of the Spirit <br>(Gal 5:22-3)</caption>
        <thead>
            <tr class="">
                <th>
                    <div>#</div>
                </th>
                <th>
                    <div>Personality
                    </div>
                </th>
                <th>
                    <div>
                        Heart
                    </div>
                </th>
                <th>
                    <div>
                        Friendship
                    </div>
                </th>

            </tr>
        </thead>
        <tbody id="tbdMtrx">
            <tr>
                <td></td>
                <td id="mtrx1" class="mtrx"></td>
                <td id="mtrx2" class="mtrx"></td>
                <td id="mtrx3" class="mtrx"></td>
            </tr>

            <tr>
                <td></td>
                <td id="mtrx4" class="mtrx"></td>
                <td id="mtrx5" class="mtrx"></td>
                <td id="mtrx6" class="mtrx"></td>
            </tr>
            <tr>
                <td></td>
                <td id="mtrx7" class="mtrx"></td>
                <td id="mtrx8" class="mtrx"></td>
                <td id="mtrx9" class="mtrx"></td>
            </tr>
        </tbody>
        <tfoot>
        </tfoot>
    </table>



    <table border="1">
        <caption id=""> Nine Fruits of the Spirit <br>(Gal 5:22-3)</caption>
        <thead>
            <tr class="">
                <th>
                    <div>#</div>
                </th>
                <th>
                    <div>Fruits
                    </div>
                </th>
                <th>
                    <div>
                        Biblical Meaning
                    </div>
                </th>
                <th>
                    <div>
                        Worldly Meaning
                    </div>
                </th>

            </tr>
        </thead>
        <tbody id="tbd">

        </tbody>
        <tfoot>
        </tfoot>
    </table>




    <table border="1">
        <caption>16 Agapes (1Col 13)</caption>
        <thead>
            <tr><th>#</th><th>check</th><th>CUV</th><th>NIV</th><th>ESV</th><th>Cases</th></tr>
        </thead>
        <tbody id="agape16">

        </tbody>
    </table>

    <br>

    <div><button id="output">expoert schedule</button><button id="loaddata">import schedule</button><br />
        <textarea id="outxt">
        </textarea><br />
        <br />
        <a class="mailtoWD" href="">Send-Email</a><br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <script>
            $(function () {
                $("#output").on("click", function (i) {
                    outputedited()
                })
                $("#loaddata").on("click", function (i) {
                    import_schedule()
                })
                $("td[contenteditable]").on("keyup", function () {
                    outputedited()
                })
                const MailToWD = "mailto:wdinge@gmail.com?subject=RE:https://wdingbox.github.io/pubs/biblestudy/my_papers/bible/parables.htm&body="
                $(".mailtoWD").on("click", function () {
                    var tx = outputedited()
                    var smailto = MailToWD + tx
                    $(".mailtoWD").attr("href", smailto)
                })
            })
            function outputedited() {
                var ar = {}
                $("tbody tr").each(function (i) {
                    var idx = parseInt($(this).find(tdIndx).text())
                    var txt = $(this).find(tdNote).text().trim()
                    ar[idx] = txt
                })
                var tx = JSON.stringify(ar, null, 4);
                $("#outxt").val(tx)
                localStorage.setItem("Noteary", tx)
                return tx
            }
            function import_schedule() {
                var tx = $("#outxt").val().trim().replace(/[\r\n\t]/g, "")
                var ar = JSON.parse(tx);
                $("tbody tr").each(function (i) {
                    var idx = parseInt($(this).find(tdIndx).text())
                    $(this).find(tdNote).text(ar[idx])
                })

            }
        </script>
        <p>&nbsp;</p>
    </div>
</body>

</html>