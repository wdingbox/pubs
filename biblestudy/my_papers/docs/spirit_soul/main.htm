<html>

<head>
    <title>s&s</title>
    <base target="_blank" />
    <META http-equiv="Content-Type" content="text/html;" charset="UTF-8">
    <META name="viewport" content="width=device-witdh, initial-scale=1, maximum-scale=1, user-scale=0">

    <script src="https://wdingbox.github.io/ham12/jq/jquery-2_1_3.min.js"></script>
    <script src="./js/spirit_soul_data.js?v=9">
    </script>
    <script src="./js/spirit_soul_fun_app.js">
    </script>
    <script src="./js/spirit_soul_vchart.js">
    </script>

    <script type="text/javascript" src="./charts/loader.js"></script>

</head>

<style>
    body {
        background-color: lightblue;
    }

    .hili {
        background-color: lightgreen;
    }

    .mark {
        background-color: red;
    }

    .frqval {
        background: lightyellow;
    }

    table {
        margin-top: 90px;
        margin-left: 10px;
        margin-right: 10px;
    }

    th,
    .bkid {
        background-color: gray;
    }
</style>

<body>



    <table border="1" id="out1" style="float:left">
    </table>
    <table border="1" id="out2">
    </table>
    <div>
        <p>
            Notes:
        </p>
        <ol>
            <li>
                Hebrew Word Frequency data is based on from www.blueletter.org.
            </li>
            <li>
                Total Words Count (TotWords) for each book is calucated from Hebrew Scripture in the OT and Greek
                Scripture in the NT.
            </li>
            <li>
                Hebrew Word Frequency Percentage Rate (%) for each book = Freq / TotWords * 100.
            </li>
        </ol>
    </div>




    <div id="chart_div" style="width: 1000px; height: 800px"></div>

    <div id="chart_div0" style="width: 1000px; height: 200px"></div>

    <div id="chart_div0_1" style="width: 1000px; height: 200px"></div>

    <div id="chart_div1" style="width: 1000px; height: 200px"></div>
    <div id="chart_div2" style="width: 1000px; height: 200px"></div>
    <div id="chart_div3" style="width: 1000px; height: 200px"></div>
    <div id="chart_div4" style="width: 1000px; height: 200px"></div>
    <div id="chart_div5" style="width: 1000px; height: 200px"></div>
    <div id="chart_div6" style="width: 1000px; height: 200px"></div>
    <div id="chart_div7" style="width: 1000px; height: 200px"></div>
    <div id="chart_div8" style="width: 1000px; height: 200px"></div>
    <div id="chart_div9" style="width: 1000px; height: 200px"></div>
    <div id="chart_div10" style="width: 1000px; height: 200px"></div>




    <table border="1">
        <caption>Takeaways</caption>
        <theader>
            <tr>
                <th>#</th>
                <th>book</th>
                <th>Hebrew</th>
                <th>Hints</th>
                <th>Features of Chart</th>
            </tr>
        </theader>
        <tbody id="Takeaways">

        </tbody>
    </table>

</body>

</html>
<script>
    $(function () {
        init_table()
        init_chart()
        Init_Takeaway()
    })

    function Init_Takeaway() {
        var trs = ""
        Object.keys(TakeawayFrFrqRate).forEach(function (key) {
            var ary = TakeawayFrFrqRate[key]
            trs += `<tr><td></td><td>${key}</td><td>${ary[0]}</td><td>${ary[1]}</td><td>${ary[2]}</td></tr>`
        });
        $("#Takeaways").html(trs)

    }



    function init_table() {
        function mark_max_of_col(etbody, colidx) {
            var vemax = null, colmax = -1
            $(etbody).find("tr").each(function () {
                var ve = $(this).find(`td:eq(${colidx})`)
                var val = parseFloat($(ve).text())
                if (val >= colmax) {
                    colmax = val
                    vemax = ve
                }
            })
            $(vemax).toggleClass("mark frqval")
        }

        var tabvw = new DatViewerApp();
        tabvw.Set(BlueLetter_WordFrq_DB)

        var tab = tabvw.output_table("Hebrew Word Frquency")
        $("#out1").html(tab).find("td").on("click", function () {
            $(this).toggleClass("hili frqval")
        })

        var tab2 = tabvw.output_table("Hebrew Word Frquency Percentage Rate (%)", true)
        $("#out2").html(tab2).find("td").on("click", function () {
            $(this).toggleClass("hili frqval")
        })


        //////////////
        $("table tbody").each(function () {

            for (var colidx = 3; colidx <= 13; colidx++) {
                mark_max_of_col(this, colidx)
            }
        })
    }




    function init_chart() {
        gen_chart("chart_div")

        gen_chart("chart_div0", [0])
        gen_chart("chart_div1", [1])
        gen_chart("chart_div2", [2])
        gen_chart("chart_div3", [3])
        gen_chart("chart_div4", [4])
        gen_chart("chart_div5", [5])
        gen_chart("chart_div6", [6])
        gen_chart("chart_div7", [7])
        gen_chart("chart_div8", [8])
        gen_chart("chart_div9", [9])

        gen_chart("chart_div10", [10])
  
        gen_chart("chart_div0_1", [0,1])

        

    }
</script>